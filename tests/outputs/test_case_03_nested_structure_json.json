{
  "content_blocks": [
    {
      "block_id": "f3f5b5a7-1e85-4244-b107-609a20360516",
      "block_type": "paragraph",
      "content": "ENTERPRISE SYSTEM CONFIGURATION MANIFEST\n=========================================\nVersion: 3.2.1-alpha | Environment: PRODUCTION | Last Updated: 2024-10-28T09:23:47Z",
      "raw_content": "ENTERPRISE SYSTEM CONFIGURATION MANIFEST\n=========================================\nVersion: 3.2.1-alpha | Environment: PRODUCTION | Last Updated: 2024-10-28T09:23:47Z",
      "position": {
        "sequence_index": 0
      },
      "metadata": {
        "char_count": 166,
        "word_count": 14,
        "depth": 0,
        "document_path": [],
        "quality_checked": true
      },
      "confidence": 1.0
    },
    {
      "block_id": "f0a065b4-a911-4b38-ae05-dab28a73905e",
      "block_type": "heading",
      "content": "[SECTION 1: SERVICE TOPOLOGY]\n-----------------------------",
      "raw_content": "[SECTION 1: SERVICE TOPOLOGY]\n-----------------------------",
      "position": {
        "sequence_index": 1
      },
      "metadata": {
        "char_count": 59,
        "word_count": 5,
        "depth": 0,
        "document_path": [],
        "quality_checked": true
      },
      "confidence": 1.0
    },
    {
      "block_id": "1135c462-396e-4368-92fc-a21a6cb27b47",
      "block_type": "paragraph",
      "content": "<system_architecture>\n  <region id=\"us-east-1\" priority=\"1\">\n    <availability_zone name=\"us-east-1a\">\n      <cluster type=\"kubernetes\" version=\"1.28.3\">\n        <namespace name=\"production\">\n          <deployment name=\"api-gateway\">\n            <replicas>12</replicas>\n            <resources>\n              <requests>\n                <cpu>2000m</cpu>\n                <memory>4Gi</memory>\n              </requests>\n              <limits>\n                <cpu>4000m</cpu>\n                <memory>8Gi</memory>\n              </limits>\n            </resources>\n            <containers>\n              <container name=\"nginx-ingress\" image=\"nginx:1.25.3-alpine\">\n                <ports>\n                  <port containerPort=\"80\" protocol=\"TCP\"/>\n                  <port containerPort=\"443\" protocol=\"TCP\"/>\n                </ports>\n                <env>\n                  <variable name=\"UPSTREAM_SERVERS\">api-service-1.prod.svc.cluster.local:8080,api-service-2.prod.svc.cluster.local:8080,api-service-3.prod.svc.cluster.local:8080</variable>\n                  <variable name=\"RATE_LIMIT\">1000</variable>\n                  <variable name=\"TIMEOUT_SECONDS\">30</variable>\n                </env>\n                <volumeMounts>\n                  <mount name=\"ssl-certs\" mountPath=\"/etc/nginx/ssl\" readOnly=\"true\"/>\n                  <mount name=\"config\" mountPath=\"/etc/nginx/conf.d\" readOnly=\"true\"/>\n                </volumeMounts>\n              </container>\n            </containers>\n            <service type=\"LoadBalancer\">\n              <selector>app=api-gateway</selector>\n              <ports>\n                <servicePort port=\"80\" targetPort=\"80\" protocol=\"TCP\"/>\n                <servicePort port=\"443\" targetPort=\"443\" protocol=\"TCP\"/>\n              </ports>\n              <loadBalancerIP>203.0.113.47</loadBalancerIP>\n            </service>\n          </deployment>\n          \n          <deployment name=\"backend-services\">\n            <strategy type=\"RollingUpdate\">\n              <maxSurge>25%</maxSurge>\n              <maxUnavailable>10%</maxUnavailable>\n            </strategy>\n            <template>\n              <metadata>\n                <labels>\n                  <label key=\"app\">backend-api</label>\n                  <label key=\"tier\">application</label>\n                  <label key=\"version\">v2.7.4</label>\n                </labels>\n                <annotations>\n                  <annotation key=\"prometheus.io/scrape\">true</annotation>\n                  <annotation key=\"prometheus.io/port\">9090</annotation>\n                </annotations>\n              </metadata>\n            </template>\n          </deployment>\n        </namespace>\n        \n        <namespace name=\"data-layer\">\n          <statefulset name=\"postgres-cluster\">\n            <replicas>3</replicas>\n            <serviceName>postgres-ha</serviceName>\n            <podManagementPolicy>OrderedReady</podManagementPolicy>\n            <volumeClaimTemplates>\n              <template>\n                <metadata>\n                  <name>data</name>\n                </metadata>\n                <spec>\n                  <accessModes>ReadWriteOnce</accessModes>\n                  <storageClassName>fast-ssd</storageClassName>\n                  <resources>\n                    <requests>\n                      <storage>500Gi</storage>\n                    </requests>\n                  </resources>\n                </spec>\n              </template>\n            </volumeClaimTemplates>\n          </statefulset>\n        </namespace>\n      </cluster>\n    </availability_zone>\n    \n    <availability_zone name=\"us-east-1b\">\n      <!-- Replica configuration mirrors us-east-1a for HA -->\n      <cluster type=\"kubernetes\" version=\"1.28.3\" role=\"failover\">\n        <replication_config>\n          <mode>async</mode>\n          <lag_threshold_seconds>5</lag_threshold_seconds>\n        </replication_config>\n      </cluster>\n    </availability_zone>\n  </region>\n</system_architecture>",
      "raw_content": "<system_architecture>\n  <region id=\"us-east-1\" priority=\"1\">\n    <availability_zone name=\"us-east-1a\">\n      <cluster type=\"kubernetes\" version=\"1.28.3\">\n        <namespace name=\"production\">\n          <deployment name=\"api-gateway\">\n            <replicas>12</replicas>\n            <resources>\n              <requests>\n                <cpu>2000m</cpu>\n                <memory>4Gi</memory>\n              </requests>\n              <limits>\n                <cpu>4000m</cpu>\n                <memory>8Gi</memory>\n              </limits>\n            </resources>\n            <containers>\n              <container name=\"nginx-ingress\" image=\"nginx:1.25.3-alpine\">\n                <ports>\n                  <port containerPort=\"80\" protocol=\"TCP\"/>\n                  <port containerPort=\"443\" protocol=\"TCP\"/>\n                </ports>\n                <env>\n                  <variable name=\"UPSTREAM_SERVERS\">api-service-1.prod.svc.cluster.local:8080,api-service-2.prod.svc.cluster.local:8080,api-service-3.prod.svc.cluster.local:8080</variable>\n                  <variable name=\"RATE_LIMIT\">1000</variable>\n                  <variable name=\"TIMEOUT_SECONDS\">30</variable>\n                </env>\n                <volumeMounts>\n                  <mount name=\"ssl-certs\" mountPath=\"/etc/nginx/ssl\" readOnly=\"true\"/>\n                  <mount name=\"config\" mountPath=\"/etc/nginx/conf.d\" readOnly=\"true\"/>\n                </volumeMounts>\n              </container>\n            </containers>\n            <service type=\"LoadBalancer\">\n              <selector>app=api-gateway</selector>\n              <ports>\n                <servicePort port=\"80\" targetPort=\"80\" protocol=\"TCP\"/>\n                <servicePort port=\"443\" targetPort=\"443\" protocol=\"TCP\"/>\n              </ports>\n              <loadBalancerIP>203.0.113.47</loadBalancerIP>\n            </service>\n          </deployment>\n          \n          <deployment name=\"backend-services\">\n            <strategy type=\"RollingUpdate\">\n              <maxSurge>25%</maxSurge>\n              <maxUnavailable>10%</maxUnavailable>\n            </strategy>\n            <template>\n              <metadata>\n                <labels>\n                  <label key=\"app\">backend-api</label>\n                  <label key=\"tier\">application</label>\n                  <label key=\"version\">v2.7.4</label>\n                </labels>\n                <annotations>\n                  <annotation key=\"prometheus.io/scrape\">true</annotation>\n                  <annotation key=\"prometheus.io/port\">9090</annotation>\n                </annotations>\n              </metadata>\n            </template>\n          </deployment>\n        </namespace>\n        \n        <namespace name=\"data-layer\">\n          <statefulset name=\"postgres-cluster\">\n            <replicas>3</replicas>\n            <serviceName>postgres-ha</serviceName>\n            <podManagementPolicy>OrderedReady</podManagementPolicy>\n            <volumeClaimTemplates>\n              <template>\n                <metadata>\n                  <name>data</name>\n                </metadata>\n                <spec>\n                  <accessModes>ReadWriteOnce</accessModes>\n                  <storageClassName>fast-ssd</storageClassName>\n                  <resources>\n                    <requests>\n                      <storage>500Gi</storage>\n                    </requests>\n                  </resources>\n                </spec>\n              </template>\n            </volumeClaimTemplates>\n          </statefulset>\n        </namespace>\n      </cluster>\n    </availability_zone>\n    \n    <availability_zone name=\"us-east-1b\">\n      <!-- Replica configuration mirrors us-east-1a for HA -->\n      <cluster type=\"kubernetes\" version=\"1.28.3\" role=\"failover\">\n        <replication_config>\n          <mode>async</mode>\n          <lag_threshold_seconds>5</lag_threshold_seconds>\n        </replication_config>\n      </cluster>\n    </availability_zone>\n  </region>\n</system_architecture>",
      "position": {
        "sequence_index": 2
      },
      "parent_id": "f0a065b4-a911-4b38-ae05-dab28a73905e",
      "metadata": {
        "char_count": 3944,
        "word_count": 148,
        "depth": 1,
        "document_path": [
          "[SECTION 1: SERVICE TOPOLOGY]\n-----------------------------"
        ],
        "quality_checked": true
      },
      "confidence": 1.0
    },
    {
      "block_id": "5ea6c88a-4207-47b0-8b5f-aa3e08642b9d",
      "block_type": "heading",
      "content": "[SECTION 2: APPLICATION CONFIGURATION]\n--------------------------------------",
      "raw_content": "[SECTION 2: APPLICATION CONFIGURATION]\n--------------------------------------",
      "position": {
        "sequence_index": 3
      },
      "metadata": {
        "char_count": 77,
        "word_count": 5,
        "depth": 0,
        "document_path": [],
        "quality_checked": true
      },
      "confidence": 1.0
    },
    {
      "block_id": "10f88cec-62f7-49cc-9b9a-bcaae62351bd",
      "block_type": "paragraph",
      "content": "{\n  \"application\": {\n    \"name\": \"EnterprisePlatform\",\n    \"version\": \"2.7.4\",\n    \"build\": {\n      \"number\": 18473,\n      \"timestamp\": \"2024-10-27T22:14:33Z\",\n      \"commit_sha\": \"a7f3d8c9e2b1f4a6c8d3e5f7a2b4c6d8e3f5a7b9\",\n      \"branch\": \"release/v2.7.x\"\n    },\n    \"features\": {\n      \"authentication\": {\n        \"enabled\": true,\n        \"providers\": [\n          {\n            \"type\": \"oauth2\",\n            \"name\": \"google\",\n            \"client_id\": \"${GOOGLE_CLIENT_ID}\",\n            \"scopes\": [\"openid\", \"email\", \"profile\"],\n            \"redirect_uri\": \"https://app.enterprise.com/auth/callback/google\"\n          },\n          {\n            \"type\": \"saml\",\n            \"name\": \"okta\",\n            \"entity_id\": \"https://enterprise.okta.com\",\n            \"sso_url\": \"https://enterprise.okta.com/app/saml/sso\",\n            \"certificate\": \"${OKTA_CERT_BASE64}\"\n          },\n          {\n            \"type\": \"ldap\",\n            \"name\": \"active_directory\",\n            \"server\": {\n              \"host\": \"ldap.internal.corp\",\n              \"port\": 636,\n              \"use_ssl\": true,\n              \"base_dn\": \"DC=corp,DC=internal\",\n              \"bind_dn\": \"CN=ServiceAccount,OU=Apps,DC=corp,DC=internal\",\n              \"bind_password\": \"${LDAP_BIND_PASSWORD}\"\n            },\n            \"user_filter\": \"(&(objectClass=person)(sAMAccountName={username}))\",\n            \"group_filter\": \"(&(objectClass=group)(member={dn}))\"\n          }\n        ],\n        \"session\": {\n          \"timeout_minutes\": 480,\n          \"refresh_enabled\": true,\n          \"sliding_expiration\": true,\n          \"cookie\": {\n            \"name\": \"ENTERPRISE_SESSION\",\n            \"secure\": true,\n            \"http_only\": true,\n            \"same_site\": \"Strict\",\n            \"domain\": \".enterprise.com\"\n          }\n        },\n        \"mfa\": {\n          \"enabled\": true,\n          \"required_for_roles\": [\"admin\", \"finance\", \"engineering\"],\n          \"methods\": [\"totp\", \"sms\", \"webauthn\"],\n          \"grace_period_days\": 7\n        }\n      },\n      \"api\": {\n        \"rate_limiting\": {\n          \"enabled\": true,\n          \"strategies\": [\n            {\n              \"tier\": \"free\",\n              \"requests_per_minute\": 60,\n              \"requests_per_hour\": 1000,\n              \"requests_per_day\": 10000,\n              \"burst_allowance\": 10\n            },\n            {\n              \"tier\": \"professional\",\n              \"requests_per_minute\": 300,\n              \"requests_per_hour\": 10000,\n              \"requests_per_day\": 100000,\n              \"burst_allowance\": 50\n            },\n            {\n              \"tier\": \"enterprise\",\n              \"requests_per_minute\": 1000,\n              \"requests_per_hour\": 50000,\n              \"requests_per_day\": 1000000,\n              \"burst_allowance\": 200\n            }\n          ],\n          \"bypass_ips\": [\"10.0.0.0/8\", \"172.16.0.0/12\", \"192.168.0.0/16\"]\n        },\n        \"endpoints\": {\n          \"/api/v2/users\": {\n            \"methods\": [\"GET\", \"POST\", \"PUT\", \"DELETE\"],\n            \"auth_required\": true,\n            \"roles\": [\"admin\", \"user_manager\"],\n            \"cache\": {\n              \"enabled\": true,\n              \"ttl_seconds\": 300,\n              \"vary_by\": [\"user_id\", \"organization_id\"]\n            }\n          },\n          \"/api/v2/analytics\": {\n            \"methods\": [\"GET\", \"POST\"],\n            \"auth_required\": true,\n            \"rate_limit_override\": {\n              \"requests_per_minute\": 30,\n              \"reason\": \"computationally_expensive\"\n            },\n            \"timeout_seconds\": 60\n          }\n        }\n      },\n      \"database\": {\n        \"connections\": {\n          \"primary\": {\n            \"host\": \"postgres-master.internal.corp\",\n            \"port\": 5432,\n            \"database\": \"enterprise_prod\",\n            \"username\": \"${DB_USERNAME}\",\n            \"password\": \"${DB_PASSWORD}\",\n            \"ssl_mode\": \"require\",\n            \"pool\": {\n              \"min_size\": 10,\n              \"max_size\": 100,\n              \"connection_timeout_seconds\": 30,\n              \"idle_timeout_seconds\": 600,\n              \"max_lifetime_seconds\": 3600\n            }\n          },\n          \"replicas\": [\n            {\n              \"host\": \"postgres-replica-1.internal.corp\",\n              \"port\": 5432,\n              \"weight\": 0.5,\n              \"role\": \"read_only\"\n            },\n            {\n              \"host\": \"postgres-replica-2.internal.corp\",\n              \"port\": 5432,\n              \"weight\": 0.5,\n              \"role\": \"read_only\"\n            }\n          ],\n          \"analytics\": {\n            \"host\": \"redshift-cluster.us-east-1.redshift.amazonaws.com\",\n            \"port\": 5439,\n            \"database\": \"analytics_warehouse\",\n            \"username\": \"${REDSHIFT_USERNAME}\",\n            \"password\": \"${REDSHIFT_PASSWORD}\",\n            \"schema\": \"public\"\n          }\n        },\n        \"migration\": {\n          \"auto_apply\": false,\n          \"location\": \"/db/migrations\",\n          \"baseline_version\": \"1.0.0\",\n          \"table\": \"schema_version\"\n        }\n      },\n      \"cache\": {\n        \"redis\": {\n          \"mode\": \"cluster\",\n          \"nodes\": [\n            {\"host\": \"redis-1.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-2.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-3.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-4.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-5.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-6.cache.internal\", \"port\": 6379}\n          ],\n          \"password\": \"${REDIS_PASSWORD}\",\n          \"database\": 0,\n          \"key_prefix\": \"enterprise:\",\n          \"default_ttl_seconds\": 3600,\n          \"strategies\": {\n            \"session\": {\"ttl_seconds\": 28800, \"persist\": true},\n            \"query_results\": {\"ttl_seconds\": 300, \"persist\": false},\n            \"static_assets\": {\"ttl_seconds\": 86400, \"persist\": true}\n          }\n        }\n      },\n      \"messaging\": {\n        \"kafka\": {\n          \"bootstrap_servers\": [\n            \"kafka-1.messaging.internal:9092\",\n            \"kafka-2.messaging.internal:9092\",\n            \"kafka-3.messaging.internal:9092\"\n          ],\n          \"topics\": {\n            \"user_events\": {\n              \"partitions\": 12,\n              \"replication_factor\": 3,\n              \"retention_hours\": 168,\n              \"compression\": \"snappy\"\n            },\n            \"audit_logs\": {\n              \"partitions\": 24,\n              \"replication_factor\": 3,\n              \"retention_hours\": 2160,\n              \"compression\": \"lz4\"\n            },\n            \"transactions\": {\n              \"partitions\": 36,\n              \"replication_factor\": 3,\n              \"retention_hours\": 720,\n              \"compression\": \"zstd\"\n            }\n          },\n          \"producer\": {\n            \"acks\": \"all\",\n            \"retries\": 3,\n            \"batch_size_bytes\": 16384,\n            \"linger_ms\": 10,\n            \"buffer_memory_bytes\": 33554432\n          },\n          \"consumer\": {\n            \"group_id\": \"enterprise-app-consumer\",\n            \"auto_offset_reset\": \"earliest\",\n            \"enable_auto_commit\": false,\n            \"max_poll_records\": 500\n          }\n        }\n      },\n      \"observability\": {\n        \"logging\": {\n          \"level\": \"INFO\",\n          \"format\": \"json\",\n          \"outputs\": [\n            {\n              \"type\": \"stdout\",\n              \"encoder\": \"json\"\n            },\n            {\n              \"type\": \"file\",\n              \"path\": \"/var/log/enterprise/app.log\",\n              \"max_size_mb\": 100,\n              \"max_backups\": 10,\n              \"max_age_days\": 30,\n              \"compress\": true\n            },\n            {\n              \"type\": \"elasticsearch\",\n              \"hosts\": [\"https://elasticsearch.logs.internal:9200\"],\n              \"index\": \"enterprise-logs\",\n              \"api_key\": \"${ELASTICSEARCH_API_KEY}\"\n            }\n          ],\n          \"sampling\": {\n            \"enabled\": true,\n            \"rate\": 0.1,\n            \"exclude_paths\": [\"/health\", \"/metrics\"]\n          }\n        },\n        \"metrics\": {\n          \"enabled\": true,\n          \"port\": 9090,\n          \"path\": \"/metrics\",\n          \"namespace\": \"enterprise_app\",\n          \"collectors\": {\n            \"go\": true,\n            \"process\": true,\n            \"http\": true,\n            \"database\": true,\n            \"custom\": true\n          }\n        },\n        \"tracing\": {\n          \"enabled\": true,\n          \"provider\": \"jaeger\",\n          \"endpoint\": \"http://jaeger-collector.monitoring.internal:14268/api/traces\",\n          \"sample_rate\": 0.01,\n          \"always_sample_paths\": [\"/api/v2/critical/*\"],\n          \"propagation_formats\": [\"w3c\", \"b3\"]\n        }\n      }\n    }\n  }\n}",
      "raw_content": "{\n  \"application\": {\n    \"name\": \"EnterprisePlatform\",\n    \"version\": \"2.7.4\",\n    \"build\": {\n      \"number\": 18473,\n      \"timestamp\": \"2024-10-27T22:14:33Z\",\n      \"commit_sha\": \"a7f3d8c9e2b1f4a6c8d3e5f7a2b4c6d8e3f5a7b9\",\n      \"branch\": \"release/v2.7.x\"\n    },\n    \"features\": {\n      \"authentication\": {\n        \"enabled\": true,\n        \"providers\": [\n          {\n            \"type\": \"oauth2\",\n            \"name\": \"google\",\n            \"client_id\": \"${GOOGLE_CLIENT_ID}\",\n            \"scopes\": [\"openid\", \"email\", \"profile\"],\n            \"redirect_uri\": \"https://app.enterprise.com/auth/callback/google\"\n          },\n          {\n            \"type\": \"saml\",\n            \"name\": \"okta\",\n            \"entity_id\": \"https://enterprise.okta.com\",\n            \"sso_url\": \"https://enterprise.okta.com/app/saml/sso\",\n            \"certificate\": \"${OKTA_CERT_BASE64}\"\n          },\n          {\n            \"type\": \"ldap\",\n            \"name\": \"active_directory\",\n            \"server\": {\n              \"host\": \"ldap.internal.corp\",\n              \"port\": 636,\n              \"use_ssl\": true,\n              \"base_dn\": \"DC=corp,DC=internal\",\n              \"bind_dn\": \"CN=ServiceAccount,OU=Apps,DC=corp,DC=internal\",\n              \"bind_password\": \"${LDAP_BIND_PASSWORD}\"\n            },\n            \"user_filter\": \"(&(objectClass=person)(sAMAccountName={username}))\",\n            \"group_filter\": \"(&(objectClass=group)(member={dn}))\"\n          }\n        ],\n        \"session\": {\n          \"timeout_minutes\": 480,\n          \"refresh_enabled\": true,\n          \"sliding_expiration\": true,\n          \"cookie\": {\n            \"name\": \"ENTERPRISE_SESSION\",\n            \"secure\": true,\n            \"http_only\": true,\n            \"same_site\": \"Strict\",\n            \"domain\": \".enterprise.com\"\n          }\n        },\n        \"mfa\": {\n          \"enabled\": true,\n          \"required_for_roles\": [\"admin\", \"finance\", \"engineering\"],\n          \"methods\": [\"totp\", \"sms\", \"webauthn\"],\n          \"grace_period_days\": 7\n        }\n      },\n      \"api\": {\n        \"rate_limiting\": {\n          \"enabled\": true,\n          \"strategies\": [\n            {\n              \"tier\": \"free\",\n              \"requests_per_minute\": 60,\n              \"requests_per_hour\": 1000,\n              \"requests_per_day\": 10000,\n              \"burst_allowance\": 10\n            },\n            {\n              \"tier\": \"professional\",\n              \"requests_per_minute\": 300,\n              \"requests_per_hour\": 10000,\n              \"requests_per_day\": 100000,\n              \"burst_allowance\": 50\n            },\n            {\n              \"tier\": \"enterprise\",\n              \"requests_per_minute\": 1000,\n              \"requests_per_hour\": 50000,\n              \"requests_per_day\": 1000000,\n              \"burst_allowance\": 200\n            }\n          ],\n          \"bypass_ips\": [\"10.0.0.0/8\", \"172.16.0.0/12\", \"192.168.0.0/16\"]\n        },\n        \"endpoints\": {\n          \"/api/v2/users\": {\n            \"methods\": [\"GET\", \"POST\", \"PUT\", \"DELETE\"],\n            \"auth_required\": true,\n            \"roles\": [\"admin\", \"user_manager\"],\n            \"cache\": {\n              \"enabled\": true,\n              \"ttl_seconds\": 300,\n              \"vary_by\": [\"user_id\", \"organization_id\"]\n            }\n          },\n          \"/api/v2/analytics\": {\n            \"methods\": [\"GET\", \"POST\"],\n            \"auth_required\": true,\n            \"rate_limit_override\": {\n              \"requests_per_minute\": 30,\n              \"reason\": \"computationally_expensive\"\n            },\n            \"timeout_seconds\": 60\n          }\n        }\n      },\n      \"database\": {\n        \"connections\": {\n          \"primary\": {\n            \"host\": \"postgres-master.internal.corp\",\n            \"port\": 5432,\n            \"database\": \"enterprise_prod\",\n            \"username\": \"${DB_USERNAME}\",\n            \"password\": \"${DB_PASSWORD}\",\n            \"ssl_mode\": \"require\",\n            \"pool\": {\n              \"min_size\": 10,\n              \"max_size\": 100,\n              \"connection_timeout_seconds\": 30,\n              \"idle_timeout_seconds\": 600,\n              \"max_lifetime_seconds\": 3600\n            }\n          },\n          \"replicas\": [\n            {\n              \"host\": \"postgres-replica-1.internal.corp\",\n              \"port\": 5432,\n              \"weight\": 0.5,\n              \"role\": \"read_only\"\n            },\n            {\n              \"host\": \"postgres-replica-2.internal.corp\",\n              \"port\": 5432,\n              \"weight\": 0.5,\n              \"role\": \"read_only\"\n            }\n          ],\n          \"analytics\": {\n            \"host\": \"redshift-cluster.us-east-1.redshift.amazonaws.com\",\n            \"port\": 5439,\n            \"database\": \"analytics_warehouse\",\n            \"username\": \"${REDSHIFT_USERNAME}\",\n            \"password\": \"${REDSHIFT_PASSWORD}\",\n            \"schema\": \"public\"\n          }\n        },\n        \"migration\": {\n          \"auto_apply\": false,\n          \"location\": \"/db/migrations\",\n          \"baseline_version\": \"1.0.0\",\n          \"table\": \"schema_version\"\n        }\n      },\n      \"cache\": {\n        \"redis\": {\n          \"mode\": \"cluster\",\n          \"nodes\": [\n            {\"host\": \"redis-1.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-2.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-3.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-4.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-5.cache.internal\", \"port\": 6379},\n            {\"host\": \"redis-6.cache.internal\", \"port\": 6379}\n          ],\n          \"password\": \"${REDIS_PASSWORD}\",\n          \"database\": 0,\n          \"key_prefix\": \"enterprise:\",\n          \"default_ttl_seconds\": 3600,\n          \"strategies\": {\n            \"session\": {\"ttl_seconds\": 28800, \"persist\": true},\n            \"query_results\": {\"ttl_seconds\": 300, \"persist\": false},\n            \"static_assets\": {\"ttl_seconds\": 86400, \"persist\": true}\n          }\n        }\n      },\n      \"messaging\": {\n        \"kafka\": {\n          \"bootstrap_servers\": [\n            \"kafka-1.messaging.internal:9092\",\n            \"kafka-2.messaging.internal:9092\",\n            \"kafka-3.messaging.internal:9092\"\n          ],\n          \"topics\": {\n            \"user_events\": {\n              \"partitions\": 12,\n              \"replication_factor\": 3,\n              \"retention_hours\": 168,\n              \"compression\": \"snappy\"\n            },\n            \"audit_logs\": {\n              \"partitions\": 24,\n              \"replication_factor\": 3,\n              \"retention_hours\": 2160,\n              \"compression\": \"lz4\"\n            },\n            \"transactions\": {\n              \"partitions\": 36,\n              \"replication_factor\": 3,\n              \"retention_hours\": 720,\n              \"compression\": \"zstd\"\n            }\n          },\n          \"producer\": {\n            \"acks\": \"all\",\n            \"retries\": 3,\n            \"batch_size_bytes\": 16384,\n            \"linger_ms\": 10,\n            \"buffer_memory_bytes\": 33554432\n          },\n          \"consumer\": {\n            \"group_id\": \"enterprise-app-consumer\",\n            \"auto_offset_reset\": \"earliest\",\n            \"enable_auto_commit\": false,\n            \"max_poll_records\": 500\n          }\n        }\n      },\n      \"observability\": {\n        \"logging\": {\n          \"level\": \"INFO\",\n          \"format\": \"json\",\n          \"outputs\": [\n            {\n              \"type\": \"stdout\",\n              \"encoder\": \"json\"\n            },\n            {\n              \"type\": \"file\",\n              \"path\": \"/var/log/enterprise/app.log\",\n              \"max_size_mb\": 100,\n              \"max_backups\": 10,\n              \"max_age_days\": 30,\n              \"compress\": true\n            },\n            {\n              \"type\": \"elasticsearch\",\n              \"hosts\": [\"https://elasticsearch.logs.internal:9200\"],\n              \"index\": \"enterprise-logs\",\n              \"api_key\": \"${ELASTICSEARCH_API_KEY}\"\n            }\n          ],\n          \"sampling\": {\n            \"enabled\": true,\n            \"rate\": 0.1,\n            \"exclude_paths\": [\"/health\", \"/metrics\"]\n          }\n        },\n        \"metrics\": {\n          \"enabled\": true,\n          \"port\": 9090,\n          \"path\": \"/metrics\",\n          \"namespace\": \"enterprise_app\",\n          \"collectors\": {\n            \"go\": true,\n            \"process\": true,\n            \"http\": true,\n            \"database\": true,\n            \"custom\": true\n          }\n        },\n        \"tracing\": {\n          \"enabled\": true,\n          \"provider\": \"jaeger\",\n          \"endpoint\": \"http://jaeger-collector.monitoring.internal:14268/api/traces\",\n          \"sample_rate\": 0.01,\n          \"always_sample_paths\": [\"/api/v2/critical/*\"],\n          \"propagation_formats\": [\"w3c\", \"b3\"]\n        }\n      }\n    }\n  }\n}",
      "position": {
        "sequence_index": 4
      },
      "parent_id": "5ea6c88a-4207-47b0-8b5f-aa3e08642b9d",
      "metadata": {
        "char_count": 8660,
        "word_count": 522,
        "depth": 1,
        "document_path": [
          "[SECTION 2: APPLICATION CONFIGURATION]\n--------------------------------------"
        ],
        "quality_checked": true
      },
      "confidence": 1.0
    },
    {
      "block_id": "6b3dfea7-32f0-42d5-a819-1eb7be376a13",
      "block_type": "heading",
      "content": "[SECTION 3: SECURITY POLICIES]\n------------------------------",
      "raw_content": "[SECTION 3: SECURITY POLICIES]\n------------------------------",
      "position": {
        "sequence_index": 5
      },
      "metadata": {
        "char_count": 61,
        "word_count": 5,
        "depth": 0,
        "document_path": [],
        "quality_checked": true
      },
      "confidence": 1.0
    },
    {
      "block_id": "63041dd3-c3b0-467c-a83b-62241deb1a8d",
      "block_type": "paragraph",
      "content": "<security_configuration>\n  <policies>\n    <network_policy name=\"strict-egress\">\n      <rule id=\"1\" action=\"ALLOW\">\n        <source>namespace:production</source>\n        <destination>*.internal.corp</destination>\n        <protocol>TCP</protocol>\n        <ports>443,5432,6379,9092</ports>\n      </rule>\n      <rule id=\"2\" action=\"DENY\">\n        <source>namespace:production</source>\n        <destination>0.0.0.0/0</destination>\n        <protocol>ANY</protocol>\n        <exception>AWS API endpoints</exception>\n      </rule>\n    </network_policy>\n    \n    <rbac_policy name=\"role-based-access\">\n      <roles>\n        <role name=\"admin\" inherits=\"user,developer\">\n          <permissions>\n            <permission resource=\"*\" action=\"*\" effect=\"allow\"/>\n          </permissions>\n        </role>\n        <role name=\"developer\">\n          <permissions>\n            <permission resource=\"deployments\" action=\"read,create,update\" effect=\"allow\"/>\n            <permission resource=\"logs\" action=\"read\" effect=\"allow\"/>\n            <permission resource=\"secrets\" action=\"read\" effect=\"deny\"/>\n          </permissions>\n        </role>\n        <role name=\"user\">\n          <permissions>\n            <permission resource=\"api:read\" action=\"execute\" effect=\"allow\"/>\n            <permission resource=\"api:write\" action=\"execute\" effect=\"conditional\">\n              <condition>user.verified == true AND user.mfa_enabled == true</condition>\n            </permission>\n          </permissions>\n        </role>\n      </roles>\n    </rbac_policy>\n  </policies>\n</security_configuration>",
      "raw_content": "<security_configuration>\n  <policies>\n    <network_policy name=\"strict-egress\">\n      <rule id=\"1\" action=\"ALLOW\">\n        <source>namespace:production</source>\n        <destination>*.internal.corp</destination>\n        <protocol>TCP</protocol>\n        <ports>443,5432,6379,9092</ports>\n      </rule>\n      <rule id=\"2\" action=\"DENY\">\n        <source>namespace:production</source>\n        <destination>0.0.0.0/0</destination>\n        <protocol>ANY</protocol>\n        <exception>AWS API endpoints</exception>\n      </rule>\n    </network_policy>\n    \n    <rbac_policy name=\"role-based-access\">\n      <roles>\n        <role name=\"admin\" inherits=\"user,developer\">\n          <permissions>\n            <permission resource=\"*\" action=\"*\" effect=\"allow\"/>\n          </permissions>\n        </role>\n        <role name=\"developer\">\n          <permissions>\n            <permission resource=\"deployments\" action=\"read,create,update\" effect=\"allow\"/>\n            <permission resource=\"logs\" action=\"read\" effect=\"allow\"/>\n            <permission resource=\"secrets\" action=\"read\" effect=\"deny\"/>\n          </permissions>\n        </role>\n        <role name=\"user\">\n          <permissions>\n            <permission resource=\"api:read\" action=\"execute\" effect=\"allow\"/>\n            <permission resource=\"api:write\" action=\"execute\" effect=\"conditional\">\n              <condition>user.verified == true AND user.mfa_enabled == true</condition>\n            </permission>\n          </permissions>\n        </role>\n      </roles>\n    </rbac_policy>\n  </policies>\n</security_configuration>",
      "position": {
        "sequence_index": 6
      },
      "parent_id": "6b3dfea7-32f0-42d5-a819-1eb7be376a13",
      "metadata": {
        "char_count": 1564,
        "word_count": 78,
        "depth": 1,
        "document_path": [
          "[SECTION 3: SECURITY POLICIES]\n------------------------------"
        ],
        "quality_checked": true
      },
      "confidence": 1.0
    },
    {
      "block_id": "333fb52e-ce84-4cc6-a034-8e1a79992eaf",
      "block_type": "paragraph",
      "content": "[END OF CONFIGURATION MANIFEST]\nChecksum: SHA256:8f4a7c3b2e9d1f6a8c5e3d7f2a9b4c6d8e3f5a7b9c1d4e6f8a2c5d7e9f3a6c8",
      "raw_content": "[END OF CONFIGURATION MANIFEST]\nChecksum: SHA256:8f4a7c3b2e9d1f6a8c5e3d7f2a9b4c6d8e3f5a7b9c1d4e6f8a2c5d7e9f3a6c8",
      "position": {
        "sequence_index": 7
      },
      "parent_id": "6b3dfea7-32f0-42d5-a819-1eb7be376a13",
      "metadata": {
        "char_count": 112,
        "word_count": 6,
        "depth": 1,
        "document_path": [
          "[SECTION 3: SECURITY POLICIES]\n------------------------------"
        ],
        "quality_checked": true
      },
      "confidence": 1.0
    }
  ],
  "document_metadata": {
    "source_file": "C:\\Users\\Andrew\\Documents\\AI ideas for fun and work\\Prompt Research\\Data Extraction\\data-extractor-tool\\test-files-assesses-extraction-tool\\test_case_03_nested_structure.txt",
    "file_format": "text",
    "file_size_bytes": 14657,
    "word_count": 783,
    "character_count": 14657,
    "extracted_at": "2025-10-30T01:30:43.359738"
  },
  "processing_stage": "quality_validation",
  "quality_score": 80.0,
  "processing_success": true
}