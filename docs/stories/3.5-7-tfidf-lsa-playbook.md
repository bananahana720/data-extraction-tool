# Story 3.5.7: TF-IDF/LSA Playbook

Status: backlog

## Story

As a junior developer unfamiliar with classical NLP techniques,
I want a TF-IDF/LSA playbook (Jupyter notebook + reference guide) with code examples and best practices,
so that I can understand semantic analysis patterns and implement Epic 4 features in <30 minutes of onboarding.

### Story Header

- **Story Key:** `3.5-7-tfidf-lsa-playbook` (Epic 3.5, Story ID 3.5.7)
- **Context:** Epic 4 developers need semantic analysis context to avoid common pitfalls (vocabulary drift, cache invalidation, sparse matrix handling). [Source: docs/retrospectives/epic-3-retro-2025-11-16.md#L59]
- **Dependencies:** Story 3.5.4 (semantic libraries), Story 3.5.6 (test corpus for examples)
- **Estimate:** 4 hours
- **Owner:** Charlie + Elena

### Story Body

Implementation will create a comprehensive TF-IDF/LSA playbook consisting of a Jupyter notebook (`docs/playbooks/semantic-analysis-intro.ipynb`) with interactive code examples and a companion markdown reference guide (`docs/playbooks/semantic-analysis-reference.md`). The notebook will cover TF-IDF basics (vectorization, vocabulary, IDF weighting), LSA basics (dimensionality reduction, topic extraction), similarity scoring (cosine similarity, top-k retrieval), joblib persistence patterns, and tuning best practices (vocabulary size, n-grams, stopwords). Real corpus analysis examples will use the semantic test corpus (Story 3.5.6) with visualizations. The playbook must enable junior devs to understand patterns in <30 minutes. [Source: docs/retrospectives/epic-3-retro-2025-11-16.md#L59]

## Acceptance Criteria

1. **Jupyter notebook exists:** `docs/playbooks/semantic-analysis-intro.ipynb` with 8 sections (intro, TF-IDF, LSA, similarity, persistence, tuning, performance, examples). [Source: docs/tech-spec-epic-3.5.md#L253-L260]
2. **Code examples execute:** All notebook cells run without errors, using semantic test corpus from Story 3.5.6. [Source: docs/tech-spec-epic-3.5.md#L253-L260]
3. **Companion reference guide:** `docs/playbooks/semantic-analysis-reference.md` with quick API reference, common pitfalls, troubleshooting. [Source: docs/tech-spec-epic-3.5.md#L262-L266]
4. **Covers key topics:** TF-IDF vectorization, LSA topic extraction, cosine similarity, joblib persistence, vocabulary management, performance considerations. [Source: docs/tech-spec-epic-3.5.md#L253-L260]
5. **Junior dev validation:** QA review confirms playbook enables understanding in <30 minutes, code examples are clear. [Source: docs/tech-spec-epic-3.5.md#L252]
6. **Documentation links:** CLAUDE.md and Epic 4 story templates link to playbook for semantic development reference. [Source: docs/tech-spec-epic-3.5.md#L252]

## Tasks / Subtasks

- [ ] **Task 1: Create Jupyter notebook structure (AC: 1)**
  - [ ] Create `docs/playbooks/semantic-analysis-intro.ipynb` with 8 sections
  - [ ] Section 1: Introduction - Classical NLP overview, enterprise constraints (no transformers)
  - [ ] Section 2: TF-IDF Basics - Vectorization, vocabulary, IDF weighting
  - [ ] Section 3: LSA Basics - Dimensionality reduction, topic extraction, TruncatedSVD
  - [ ] Section 4: Similarity Scoring - Cosine similarity, top-k retrieval
  - [ ] Section 5: Joblib Persistence - Saving/loading models, cache patterns
  - [ ] Section 6: Tuning & Best Practices - Vocabulary size, n-grams, stopwords, stemming
  - [ ] Section 7: Performance Considerations - Batch processing, memory limits, sparse matrices
  - [ ] Section 8: Examples - Real corpus analysis with visualizations

- [ ] **Task 2: Implement code examples (AC: 2, 4)**
  - [ ] Load semantic test corpus from Story 3.5.6
  - [ ] TF-IDF example: Fit vectorizer, transform corpus, inspect vocabulary and IDF weights
  - [ ] LSA example: Fit LSA model, project to topic space, interpret topics
  - [ ] Similarity example: Query document, compute similarities, retrieve top-k
  - [ ] Persistence example: Save models with joblib, reload, verify identical outputs
  - [ ] Add visualizations (word clouds, topic distributions, similarity heatmaps)
  - [ ] Test all cells execute without errors

- [ ] **Task 3: Create reference guide (AC: 3)**
  - [ ] Create `docs/playbooks/semantic-analysis-reference.md`
  - [ ] Quick API reference: TFIDFVectorizer, TruncatedSVD, cosine_similarity, joblib.dump/load
  - [ ] Common pitfalls: Vocabulary drift, cache invalidation, memory issues with dense matrices
  - [ ] Troubleshooting guide: Import errors, dimension mismatches, slow performance
  - [ ] Links to scikit-learn official docs

- [ ] **Task 4: Validation and integration (AC: 5-6)**
  - [ ] QA review: Junior dev reads playbook, provides feedback on clarity and completeness
  - [ ] Verify 30-minute understanding goal is met
  - [ ] Update CLAUDE.md to reference playbook in semantic analysis sections
  - [ ] Add playbook link to Epic 4 story template (coordinate with Story 3.5.1)
  - [ ] Ensure playbook is discoverable via `docs/playbooks/` directory

## Dev Notes

### Requirements Context Summary

- **Retrospective prep task #4:** TF-IDF/LSA playbook/starter notebook for juniors – 4h, Charlie + Elena. [Source: docs/retrospectives/epic-3-retro-2025-11-16.md#L59]
- **Junior dev context gap:** Developers unfamiliar with classical NLP need patterns to avoid vocabulary drift, cache issues. [Source: docs/retrospectives/epic-3-retro-2025-11-16.md#L44]
- **Usability requirement:** Junior dev must understand TF-IDF in <30 min per NFR-U2. [Source: docs/tech-spec-epic-3.5.md#L252]

### Structure Alignment Summary

- Playbook follows existing `docs/playbooks/` directory structure (new directory, establishes pattern).
- Uses semantic test corpus (Story 3.5.6) for realistic examples.
- Integrates with CLAUDE.md and story templates for discoverability.

### References

- `docs/retrospectives/epic-3-retro-2025-11-16.md#L59, L44` – Preparation sprint task #4, junior dev context need
- `docs/tech-spec-epic-3.5.md#L251-L266` – Playbook structure and requirements
- `docs/stories/3.5-6-semantic-qa-fixtures.md` – Test corpus for examples
- `docs/stories/3.5-4-semantic-dependencies-smoke-test.md` – Semantic libraries installation

## Dev Agent Record

### Context Reference

- docs/retrospectives/epic-3-retro-2025-11-16.md
- docs/tech-spec-epic-3.5.md
- docs/stories/3.5-6-semantic-qa-fixtures.md

### Agent Model Used

claude-sonnet-4-5-20250929

### Debug Log References

Session 2025-11-17: Story 3.5.7 drafted from Epic 3.5 tech spec and retrospective preparation tasks.

### Completion Notes List

- **2025-11-17:** Story created with 6 ACs, 4 task groups, references to retrospective and tech spec.

### File List

**Created:**
- `docs/stories/3.5-7-tfidf-lsa-playbook.md` (this document)
