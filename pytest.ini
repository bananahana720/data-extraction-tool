[pytest]
# Pytest configuration for data extraction tool

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Directories to search for tests
testpaths = tests

# Additional command line options applied by default
addopts =
    # Verbose output showing test names
    -v
    # Show summary of all test outcomes
    -ra
    # Show local variables in tracebacks
    --showlocals
    # Strict markers - fail if unknown marker used
    --strict-markers
    # Fail on warnings (comment out during development if too strict)
    # --strict-warnings

# Minimum Python version
minversion = 3.11

# Custom markers for selective test execution
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (slower, multiple components)
    slow: Tests that may take more than 1 second
    performance: Performance and benchmarking tests
    extraction: Tests for extractor modules
    processing: Tests for processor modules
    formatting: Tests for formatter modules
    pipeline: Tests for pipeline orchestration
    cli: Command-line interface tests
    subprocess: CLI tests using subprocess (validates installed package)
    edge_case: Edge case and boundary condition tests
    stress: Resource-intensive stress tests
    infrastructure: Infrastructure component tests (config, logging, errors)
    cross_format: Cross-format validation and consistency tests

# Coverage options (using pytest-cov)
[coverage:run]
source = src
omit =
    */tests/*
    */test_*
    */__pycache__/*
    */venv/*
    */.venv/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False
# Fail if coverage is below 60% (Epic 1 baseline target)
fail_under = 60

[coverage:html]
directory = htmlcov

# Console output format
console_output_style = progress

# Logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Ignore specific warnings
filterwarnings =
    # Ignore specific deprecation warnings if needed
    # ignore::DeprecationWarning

# Timeout for tests (requires pytest-timeout)
# Uncomment when pytest-timeout is installed:
# timeout = 300
# timeout_method = thread
